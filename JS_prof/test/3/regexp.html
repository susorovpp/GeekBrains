<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    //Синтаксис 1
    // let regExp = new RegExp('Регулярное выражение', 'флаги');

    //Синтаксис 2 (приоритетный)
    // let a = /Регулярное_выражение/флаг;

    //Флаги
    // i - поиск без учета регистра
    // g - глобальный поиск
    // m - многострочный поиск \n

    let str = 'Язык JavaScript называется так из-за популярности языка Java';
    let regExp = new RegExp('java', 'ig');

    // string methods

    // search
    // -1 - вхождения не найдено
    // Возвращает индекс первого вхождения
    // Не чувствителен к флагу g
    console.log(str.search(regExp));

    //match
    // возвращает объект
    // с флагом g возвращает массив
    let a = str.match(/[java]/i);
    console.log(a[0], a.index, a.input);

    //замены
    console.log('+7 (000) 000-00-00'.replace('-', ':'));
    console.log('+7 (000) 000-00-00'.replace(/-/, ':'));
    console.log('+7 (000) 000-00-00'.replace(/-/g, ':'));

    //Классы
    // \w - [a-z0-9_]
    // \s - space, tab, \n
    // \d - [0123456789] - [0-9]
    // [а-яА-ЯЁё] - набор для определения кириллического символа
    // \b - граница слова
    // \D - [^0-9] - [^0123456789]
    // \W - [^a-z0-9_]
    // \B - все кроме границ слов
    // \S - все кроме пробелов

    let name = 'Doe, John';
    console.log(name.replace(/([a-z]{4}), ([a-z]+)/i, 'Hello $&')); // $& - ссылка на полное соответствие
    console.log(name.replace(/([a-z]+), ([a-z]+)/i, 'Hello $2'));

    //Квантификаторы
    // {m} - число повторений символа строго m раз
    // {m, n} - число повторений символа от m раз до n раз
    // {m, } - число повторений символа от m раз до бесконечности
    // { ,m} - число повторений символа от 0 до m раз
    //Сокращения
    // + - {1, }
    // * - {0, }
    // ? - {0, 1}

    console.log('+7 (000) 000-00-00'.match(/\d/g));
    console.log('+7 (000) 000-00-00'.match(/\d+/g));
    console.log('+7 (000) 000-00-00'.match(/\d+/g).join(''));

    //границы слова
    console.log('Язык Java!'.match(/\bjava\b/i));
    console.log('Язык JavaScript!'.match(/\bjava\b/i));

    console.log('color colour'.match(/colou?r/g));
    console.log('color colour colotr'.match(/colo[ut]?r/g));

    console.log('Chapter 7.2'.match(/\d\.\d/));
    console.log('Chapter 7n2'.match(/\d\.\d/));

    // методы со стороны регулярного выражения
    //test
    //exec

    console.log(/java/i.test(str));
    console.log(/java/.test(str));


    //exec
    //зависит от флага g

    console.log(/java/i.exec(str));

    // c флагом g

    let result;
    let regExp1 = /java/ig;

    console.log('Начальный lastIndex', regExp1.lastIndex);

    while (result = regExp1.exec(str)){
        console.log(result);
        console.log(`Найдено ${result[0]} на позиции ${result.index}`);
        console.log('текущий lastIndex', regExp1.lastIndex);
    }
    console.log('Конечный lastIndex', regExp1.lastIndex);
</script>
</body>
</html>